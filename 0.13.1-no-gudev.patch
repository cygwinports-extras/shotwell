--- origsrc/shotwell-0.13.1/Makefile	2012-10-05 13:07:37.000000000 -0500
+++ src/shotwell-0.13.1/Makefile	2012-11-01 22:07:23.873984700 -0500
@@ -297,7 +297,6 @@ EXT_PKGS = \
 	gstreamer-base-0.10 \
 	gstreamer-pbutils-0.10 \
 	gtk+-3.0 \
-	gudev-1.0 \
 	libexif \
 	libgphoto2 \
 	json-glib-1.0 \
@@ -330,7 +329,6 @@ EXT_PKG_VERSIONS = \
 	gstreamer-plugins-base-0.10 >= 0.10.32 \
 	gstreamer-pbutils-0.10 >= 0.10.32 \
 	gtk+-3.0 >= 3.0.11 \
-	gudev-1.0 >= 145 \
 	libexif >= 0.6.16 \
 	libgphoto2 >= 2.4.2 \
 	libraw >= 0.13.2 \
--- origsrc/shotwell-0.13.1/src/BatchImport.vala	2012-10-05 12:51:09.000000000 -0500
+++ src/shotwell-0.13.1/src/BatchImport.vala	2012-11-01 22:07:58.934033100 -0500
@@ -117,8 +117,10 @@ public enum ImportResult {
                 return ImportResult.FILE_WRITE_ERROR;
             else
                 return ImportResult.FILE_ERROR;
+#if CAMERA
         } else if (err is GPhotoError) {
             return ImportResult.CAMERA_ERROR;
+#endif
         }
         
         return default_result;
--- origsrc/shotwell-0.13.1/src/Properties.vala	2012-10-05 12:51:09.000000000 -0500
+++ src/shotwell-0.13.1/src/Properties.vala	2012-11-01 22:12:11.414381500 -0500
@@ -158,6 +158,7 @@ private class BasicProperties : Properti
 
         title = source.get_name();
         
+#if CAMERA
         if (source is PhotoSource || source is PhotoImportSource) {           
             start_time = (source is PhotoSource) ? ((PhotoSource) source).get_exposure_time() :
                 ((PhotoImportSource) source).get_exposure_time();
@@ -165,6 +166,13 @@ private class BasicProperties : Properti
                         
             PhotoMetadata? metadata = (source is PhotoSource) ? ((PhotoSource) source).get_metadata() :
                 ((PhotoImportSource) source).get_metadata();
+#else
+        if (source is PhotoSource) {
+            start_time = ((PhotoSource) source).get_exposure_time();
+            end_time = start_time;
+                        
+            PhotoMetadata? metadata = ((PhotoSource) source).get_metadata();
+#endif
 
             if (metadata != null) {
                 exposure = metadata.get_exposure_string();
@@ -184,8 +192,10 @@ private class BasicProperties : Properti
                     Dimensions(0, 0);
             }
             
+#if CAMERA
             if (source is PhotoSource)
                 dimensions = ((PhotoSource) source).get_dimensions();
+#endif
             
             if (source is Photo && ((Photo) source).get_master_file_format() == PhotoFileFormat.RAW) {
                 Photo photo = source as Photo;
@@ -205,8 +215,11 @@ private class BasicProperties : Properti
             
             photo_count = event_photo_count;
             video_count = event_video_count;
+#if CAMERA
         } else if (source is VideoSource || source is VideoImportSource) {
             if (source is VideoSource) {
+#else
+        } else if (source is VideoSource) {
                 Video video = (Video) source;
                 clip_duration = video.get_clip_duration();
 
@@ -214,9 +227,11 @@ private class BasicProperties : Properti
                     dimensions = video.get_frame_dimensions();
 
                 start_time = video.get_exposure_time();
+#if CAMERA
             } else {
                 start_time = ((VideoImportSource) source).get_exposure_time();
             }
+#endif
             end_time = start_time;
         }
     }
@@ -229,10 +244,15 @@ private class BasicProperties : Properti
         foreach (DataView view in iter) {
             DataSource source = view.get_source();
             
+#if CAMERA
             if (source is PhotoSource || source is PhotoImportSource) {                  
                 time_t exposure_time = (source is PhotoSource) ?
                     ((PhotoSource) source).get_exposure_time() :
                     ((PhotoImportSource) source).get_exposure_time();
+#else
+            if (source is PhotoSource) {
+                time_t exposure_time = ((PhotoSource) source).get_exposure_time();
+#endif
 
                 if (exposure_time != 0) {
                     if (start_time == 0 || exposure_time < start_time)
@@ -268,10 +288,15 @@ private class BasicProperties : Properti
                 photo_count += event_photo_count;
                 video_count += event_video_count;
                 event_count++;
+#if CAMERA
             } else if (source is VideoSource || source is VideoImportSource) {
                 time_t exposure_time = (source is VideoSource) ?
                     ((VideoSource) source).get_exposure_time() :
                     ((VideoImportSource) source).get_exposure_time();
+#else
+            } else if (source is VideoSource) {
+                time_t exposure_time = ((VideoSource) source).get_exposure_time();
+#endif
 
                 if (exposure_time != 0) {
                     if (start_time == 0 || exposure_time < start_time)
--- origsrc/shotwell-0.13.1/src/SearchFilter.vala	2012-10-05 12:59:02.000000000 -0500
+++ src/shotwell-0.13.1/src/SearchFilter.vala	2012-11-01 22:13:23.154480500 -0500
@@ -482,8 +482,10 @@ public class SearchFilterActions {
             Core.ViewTracker? tracker = old_tracked_page.get_view_tracker();
             if (tracker is MediaViewTracker)
                 tracker.updated.disconnect(on_media_tracker_updated);
+#if CAMERA
             else if (tracker is CameraViewTracker)
                 tracker.updated.disconnect(on_camera_tracker_updated);
+#endif
         }
         
         CheckerboardPage? new_tracked_page = new_page as CheckerboardPage;
@@ -496,11 +498,13 @@ public class SearchFilterActions {
                 on_media_tracker_updated(tracker);
                 
                 return;
+#if CAMERA
             } else if (tracker is CameraViewTracker) {
                 tracker.updated.connect(on_camera_tracker_updated);
                 on_camera_tracker_updated(tracker);
                 
                 return;
+#endif
             }
         }
         
@@ -525,6 +529,7 @@ public class SearchFilterActions {
         update_sensitivities();
     }
     
+#if CAMERA
     private void on_camera_tracker_updated(Core.Tracker t) {
         CameraViewTracker tracker = (CameraViewTracker) t;
         
@@ -535,6 +540,7 @@ public class SearchFilterActions {
 
         update_sensitivities();
     }
+#endif
     
     private void update_sensitivities() {
         flagged.set_stock_id(((SearchFilterCriteria.FLAG & criteria) != 0 && has_flagged) ?
--- origsrc/shotwell-0.13.1/src/camera/mk/camera.mk	2012-10-05 12:51:09.000000000 -0500
+++ src/shotwell-0.13.1/src/camera/mk/camera.mk	2012-11-01 22:13:33.604495000 -0500
@@ -12,7 +12,6 @@ UNIT_DIR := camera
 # NOTE: Do *not* include the unit's master file, i.e. UNIT_NAME.vala.
 UNIT_FILES := \
 	Branch.vala \
-	CameraTable.vala \
 	GPhoto.vala \
 	ImportPage.vala
 
--- origsrc/shotwell-0.13.1/src/library/LibraryWindow.vala	2012-10-05 12:59:29.000000000 -0500
+++ src/shotwell-0.13.1/src/library/LibraryWindow.vala	2012-11-01 22:15:41.344671200 -0500
@@ -114,7 +114,9 @@ public class LibraryWindow : AppWindow {
     private Library.FlaggedBranch flagged_branch = new Library.FlaggedBranch();
     private Library.LastImportBranch last_import_branch = new Library.LastImportBranch();
     private Library.ImportQueueBranch import_queue_branch = new Library.ImportQueueBranch();
+#if CAMERA
     private Camera.Branch camera_branch = new Camera.Branch();
+#endif
     private Searches.Branch saved_search_branch = new Searches.Branch();
     private bool page_switching_enabled = true;
     
@@ -171,7 +173,9 @@ public class LibraryWindow : AppWindow {
         sidebar_tree.graft(flagged_branch, SidebarRootPosition.FLAGGED);
         sidebar_tree.graft(last_import_branch, SidebarRootPosition.LAST_IMPORTED);
         sidebar_tree.graft(import_queue_branch, SidebarRootPosition.IMPORT_QUEUE);
+#if CAMERA
         sidebar_tree.graft(camera_branch, SidebarRootPosition.CAMERAS);
+#endif
         sidebar_tree.graft(saved_search_branch, SidebarRootPosition.SAVED_SEARCH);
         
         // create and connect extended properties window
@@ -230,7 +234,9 @@ public class LibraryWindow : AppWindow {
         LibraryMonitorPool.get_instance().monitor_installed.connect(on_library_monitor_installed);
         LibraryMonitorPool.get_instance().monitor_destroyed.connect(on_library_monitor_destroyed);
         
+#if CAMERA
         CameraTable.get_instance().camera_added.connect(on_camera_added);
+#endif
         
         background_progress_bar.set_show_text(true);
         
@@ -261,7 +267,9 @@ public class LibraryWindow : AppWindow {
         LibraryMonitorPool.get_instance().monitor_installed.disconnect(on_library_monitor_installed);
         LibraryMonitorPool.get_instance().monitor_destroyed.disconnect(on_library_monitor_destroyed);
         
+#if CAMERA
         CameraTable.get_instance().camera_added.disconnect(on_camera_added);
+#endif
     }
     
     private void on_library_monitor_installed(LibraryMonitor monitor) {
@@ -1037,6 +1045,7 @@ public class LibraryWindow : AppWindow {
         switch_to_page(import_queue_branch.get_queue_page());
     }
     
+#if CAMERA
     private void on_camera_added(DiscoveredCamera camera) {
         Camera.SidebarEntry? entry = camera_branch.get_entry_for_camera(camera);
         if (entry == null)
@@ -1063,6 +1072,7 @@ public class LibraryWindow : AppWindow {
             switch_to_page(page);
         }
     }
+#endif
 
     // This should only be called by LibraryWindow and PageStub.
     public void add_to_notebook(Page page) {
@@ -1505,8 +1515,10 @@ public class LibraryWindow : AppWindow {
         
         // convert file: URIs into gphoto disk: URIs
         string alt_uri = null;
+#if CAMERA
         if (uri.has_prefix("file://"))
             alt_uri = CameraTable.get_port_uri(uri.replace("file://", "disk:"));
+#endif
         
         // we only add uris when the notification is called on startup
         if (at_startup) {
--- origsrc/shotwell-0.13.1/src/library/mk/library.mk	2012-10-05 12:51:09.000000000 -0500
+++ src/shotwell-0.13.1/src/library/mk/library.mk	2012-11-01 22:15:50.334683600 -0500
@@ -40,7 +40,6 @@ UNIT_USES := \
 	Sidebar \
 	Events \
 	Tags \
-	Camera \
 	Searches \
 	DataImports
 
--- origsrc/shotwell-0.13.1/units.mk	2012-10-05 12:51:09.000000000 -0500
+++ src/shotwell-0.13.1/units.mk	2012-11-01 22:16:05.184704100 -0500
@@ -22,7 +22,6 @@ UNITS = \
 	sidebar \
 	events \
 	tags \
-	camera \
 	searches \
 	config \
 	data_imports
